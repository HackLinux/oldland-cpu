<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Oldland-cpu : Oldland CPU - a 32-bit RISC FPGA CPU including RTL + tools" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Oldland-cpu</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jamieiles/oldland-cpu">View on GitHub</a>

	  <a href="http://jamieiles.github.io/oldland-cpu/">
          <h1 id="project_title"></h1>
          <h2 id="project_tagline">Oldland CPU - a 32-bit RISC FPGA CPU including RTL + tools</h2>
	  </a>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jamieiles/oldland-cpu/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jamieiles/oldland-cpu/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<h1>Oldland Instruction Set</h1>

<p><a id="top"></a></p>
<p>Arithmetic/Bitwise instructions</p>
<ul>


<li class="instrdef"><a href="#add">add</a></li>



<li class="instrdef"><a href="#addc">addc</a></li>



<li class="instrdef"><a href="#sub">sub</a></li>



<li class="instrdef"><a href="#subc">subc</a></li>



<li class="instrdef"><a href="#lsl">lsl</a></li>



<li class="instrdef"><a href="#lsr">lsr</a></li>



<li class="instrdef"><a href="#and">and</a></li>



<li class="instrdef"><a href="#xor">xor</a></li>



<li class="instrdef"><a href="#bic">bic</a></li>



<li class="instrdef"><a href="#bst">bst</a></li>



<li class="instrdef"><a href="#or">or</a></li>



<li class="instrdef"><a href="#mul">mul</a></li>



<li class="instrdef"><a href="#cmp">cmp</a></li>



<li class="instrdef"><a href="#asr">asr</a></li>



<li class="instrdef"><a href="#mov">mov</a></li>




























































</ul>

<p>Call/Branch/Exception instructions</p>
<ul>
































<li class="instrdef"><a href="#call">call</a></li>



<li class="instrdef"><a href="#ret">ret</a></li>



<li class="instrdef"><a href="#b">b</a></li>



<li class="instrdef"><a href="#bne">bne</a></li>



<li class="instrdef"><a href="#beq">beq</a></li>



<li class="instrdef"><a href="#bgt">bgt</a></li>



<li class="instrdef"><a href="#blt">blt</a></li>



<li class="instrdef"><a href="#bgts">bgts</a></li>



<li class="instrdef"><a href="#blts">blts</a></li>



<li class="instrdef"><a href="#bgte">bgte</a></li>



<li class="instrdef"><a href="#bgtes">bgtes</a></li>



<li class="instrdef"><a href="#blte">blte</a></li>



<li class="instrdef"><a href="#bltes">bltes</a></li>





























<li class="instrdef"><a href="#swi">swi</a></li>



<li class="instrdef"><a href="#rfe">rfe</a></li>




</ul>

<p>Load/Store instructions</p>
<ul>


























































<li class="instrdef"><a href="#ldr32">ldr32</a></li>



<li class="instrdef"><a href="#ldr16">ldr16</a></li>



<li class="instrdef"><a href="#ldr8">ldr8</a></li>



<li class="instrdef"><a href="#str32">str32</a></li>



<li class="instrdef"><a href="#str16">str16</a></li>



<li class="instrdef"><a href="#str8">str8</a></li>





















<li class="instrdef"><a href="#cache">cache</a></li>


</ul>

<p>Miscellaneous instructions</p>
<ul>






































































<li class="instrdef"><a href="#bkp">bkp</a></li>



<li class="instrdef"><a href="#nop">nop</a></li>



<li class="instrdef"><a href="#movhi">movhi</a></li>



<li class="instrdef"><a href="#orlo">orlo</a></li>



<li class="instrdef"><a href="#cpuid">cpuid</a></li>



<li class="instrdef"><a href="#gcr">gcr</a></li>



<li class="instrdef"><a href="#scr">scr</a></li>








</ul>

<h2><a id="add">add</a></h2>
<p><strong>Class: 0, Opcode: 0</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra + OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="addc">addc</a></h2>
<p><strong>Class: 0, Opcode: 1</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra + OP2 + C, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="sub">sub</a></h2>
<p><strong>Class: 0, Opcode: 2</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra - OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="subc">subc</a></h2>
<p><strong>Class: 0, Opcode: 3</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra - OP2 + C, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="lsl">lsl</a></h2>
<p><strong>Class: 0, Opcode: 4</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra &lt;&lt; OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="lsr">lsr</a></h2>
<p><strong>Class: 0, Opcode: 5</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra &gt;&gt; OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="and">and</a></h2>
<p><strong>Class: 0, Opcode: 6</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra &amp; OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="xor">xor</a></h2>
<p><strong>Class: 0, Opcode: 7</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra ^ OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bic">bic</a></h2>
<p><strong>Class: 0, Opcode: 8</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra &amp;= ~(1 &lt;&lt; OP2), OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bst">bst</a></h2>
<p><strong>Class: 0, Opcode: 9</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra |= (1 &lt;&lt; OP2), OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="or">or</a></h2>
<p><strong>Class: 0, Opcode: 10</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra | OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="mul">mul</a></h2>
<p><strong>Class: 0, Opcode: 11</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra * OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="cmp">cmp</a></h2>
<p><strong>Class: 0, Opcode: 12</strong></p>
<h3>Description</h3>
<p><em>Ra - OP2, OP2 may either be a register or a 13-bit signed immediate.  The result is discarded.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="asr">asr</a></h2>
<p><strong>Class: 0, Opcode: 14</strong></p>
<h3>Description</h3>
<p><em>Rd := Ra ASR OP2, OP2 may either be a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="mov">mov</a></h2>
<p><strong>Class: 0, Opcode: 15</strong></p>
<h3>Description</h3>
<p><em>Rd := OP1, OP1 may be either a register or a 13-bit signed immediate.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm13 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="call">call</a></h2>
<p><strong>Class: 1, Opcode: 0</strong></p>
<h3>Description</h3>
<p><em>PC := PC + (I &lt;&lt; 2) if immediate, PC := Rb if register. LR := PC + 4.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="ret">ret</a></h2>
<p><strong>Class: 1, Opcode: 1</strong></p>
<h3>Description</h3>
<p><em>PC := LR</em></p>

<h2><a id="b">b</a></h2>
<p><strong>Class: 1, Opcode: 4</strong></p>
<h3>Description</h3>
<p><em>PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bne">bne</a></h2>
<p><strong>Class: 1, Opcode: 5</strong></p>
<h3>Description</h3>
<p><em>If !Z PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="beq">beq</a></h2>
<p><strong>Class: 1, Opcode: 6</strong></p>
<h3>Description</h3>
<p><em>If Z PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bgt">bgt</a></h2>
<p><strong>Class: 1, Opcode: 7</strong></p>
<h3>Description</h3>
<p><em>If !C &amp;&amp; !Z PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="blt">blt</a></h2>
<p><strong>Class: 1, Opcode: 8</strong></p>
<h3>Description</h3>
<p><em>If C &amp;&amp; !Z PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bgts">bgts</a></h2>
<p><strong>Class: 1, Opcode: 9</strong></p>
<h3>Description</h3>
<p><em>If !Z &amp;&amp; (N == O) PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="blts">blts</a></h2>
<p><strong>Class: 1, Opcode: 10</strong></p>
<h3>Description</h3>
<p><em>If N != O PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bgte">bgte</a></h2>
<p><strong>Class: 1, Opcode: 12</strong></p>
<h3>Description</h3>
<p><em>If !C PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bgtes">bgtes</a></h2>
<p><strong>Class: 1, Opcode: 13</strong></p>
<h3>Description</h3>
<p><em>If N == O PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="blte">blte</a></h2>
<p><strong>Class: 1, Opcode: 14</strong></p>
<h3>Description</h3>
<p><em>If C || Z PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bltes">bltes</a></h2>
<p><strong>Class: 1, Opcode: 11</strong></p>
<h3>Description</h3>
<p><em>If (N != O) || Z PC := PC + (i &lt;&lt; 2) if immediate, PC := RB if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm24 or rb</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="ldr32">ldr32</a></h2>
<p><strong>Class: 2, Opcode: 0</strong></p>
<h3>Description</h3>
<p><em>Rd := M[PC + I] (32-bits) if immediate, M[Ra + I] if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm13pc or index</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="ldr16">ldr16</a></h2>
<p><strong>Class: 2, Opcode: 1</strong></p>
<h3>Description</h3>
<p><em>Rd := M[PC + I] (16-bits) if immediate, M[Ra + I] if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm13pc or index</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="ldr8">ldr8</a></h2>
<p><strong>Class: 2, Opcode: 2</strong></p>
<h3>Description</h3>
<p><em>Rd := M[PC + I] (8-bits) if immediate, M[Ra + I] if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm13pc or index</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="str32">str32</a></h2>
<p><strong>Class: 2, Opcode: 4</strong></p>
<h3>Description</h3>
<p><em>M[PC + I] := Rb (32-bits) if immediate, M[Ra + I] := Rb if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rb</li>
      
    
  
  
    
      <li>imm13pc or index</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="str16">str16</a></h2>
<p><strong>Class: 2, Opcode: 5</strong></p>
<h3>Description</h3>
<p><em>M[PC + I] := Rb (16-bits) if immediate, M[Ra + I] := Rb if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rb</li>
      
    
  
  
    
      <li>imm13pc or index</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="str8">str8</a></h2>
<p><strong>Class: 2, Opcode: 6</strong></p>
<h3>Description</h3>
<p><em>M[PC + I] := Rb (8-bits) if immediate, M[Ra + I] := Rb if register.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rb</li>
      
    
  
  
    
      <li>imm13pc or index</li>
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="bkp">bkp</a></h2>
<p><strong>Class: 3, Opcode: 0</strong></p>
<h3>Description</h3>
<p><em>Hardware breakpoint.</em></p>

<h2><a id="nop">nop</a></h2>
<p><strong>Class: 3, Opcode: 15</strong></p>
<h3>Description</h3>
<p><em>No operation.</em></p>

<h2><a id="movhi">movhi</a></h2>
<p><strong>Class: 3, Opcode: 11</strong></p>
<h3>Description</h3>
<p><em>Rd := imm16 &lt;&lt; 16.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm16</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="orlo">orlo</a></h2>
<p><strong>Class: 3, Opcode: 13</strong></p>
<h3>Description</h3>
<p><em>Rd := Rb | imm16.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>rb</li>
      
    
  
  
    
      <li>imm16</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="cpuid">cpuid</a></h2>
<p><strong>Class: 3, Opcode: 7</strong></p>
<h3>Description</h3>
<p><em>Rd := cpuid[imm16].</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm13</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="gcr">gcr</a></h2>
<p><strong>Class: 3, Opcode: 1</strong></p>
<h3>Description</h3>
<p><em>Rd := control register N.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>rd</li>
      
    
  
  
    
      <li>imm13</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="scr">scr</a></h2>
<p><strong>Class: 3, Opcode: 2</strong></p>
<h3>Description</h3>
<p><em>Control register N := ra.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm13</li>
      
    
  
  
    
      <li>ra</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="swi">swi</a></h2>
<p><strong>Class: 1, Opcode: 15</strong></p>
<h3>Description</h3>
<p><em>Raise SWI imm13.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>imm13</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>

<h2><a id="rfe">rfe</a></h2>
<p><strong>Class: 1, Opcode: 2</strong></p>
<h3>Description</h3>
<p><em>Return from exception.</em></p>

<h2><a id="cache">cache</a></h2>
<p><strong>Class: 2, Opcode: 15</strong></p>
<h3>Description</h3>
<p><em>Cache operation imm13, with index Ra if index valid.</em></p>

<h3>Instruction Operands</h3>
<ul>
  
  
    
      <li>ra</li>
      
    
  
  
    
      <li>imm13</li>
      
    
  
  </ul>
<p><a href="#top">top of page</a></p>


      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Oldland-cpu maintained by <a href="https://github.com/jamieiles">jamieiles</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43848066-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>

